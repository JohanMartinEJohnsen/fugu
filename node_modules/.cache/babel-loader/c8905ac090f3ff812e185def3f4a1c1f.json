{"ast":null,"code":"var _jsxFileName = \"/Users/Johan/fugu/src/Game.js\";\nimport React from \"react\";\nimport Board from \"./Board\";\nimport EatingBoard from \"./EatingBoard\";\nimport Swal from \"sweetalert2\";\nimport { throwStatement } from \"@babel/types\";\n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.newRound = player => {\n      console.log(\"NEW ROUND BLIR KJØRT\");\n      console.log(\"The score is\" + this.score);\n\n      if (this.state.lastBidding) {\n        //Makes the one who bidded highest last round start\n        this.setState({\n          whosTurn: true,\n          bidding: false,\n          passBidding: false,\n          lastBidding: false,\n          eatingStage: false,\n          placed: []\n        });\n        const piecesClone = [...this.pieces];\n        this.sushis = piecesClone;\n        this.bid = 0;\n        this.turn = this.props.players.indexOf(this.props.userName);\n        this.whosBidding = null;\n        this.passedPlayers = [];\n      } else {\n        // Resets for everyone else\n        console.log(\"nullstiller for ikke høyeste budgiver\");\n        this.setState({\n          whosTurn: false,\n          bidding: false,\n          passBidding: false,\n          lastBidding: false,\n          eatingStage: false,\n          placed: []\n        });\n        const piecesClone = [...this.pieces];\n        this.sushis = piecesClone;\n        this.turn = this.props.players.indexOf(player);\n        this.bid = 0;\n        this.whosBidding = null;\n        this.passedPlayers = [];\n      }\n    };\n\n    this.announceEating = (player, amount) => {\n      this.props.pubnub.publish({\n        message: {\n          eatingStage: true,\n          whoEating: player,\n          amount: amount,\n          bidding: false\n        },\n        channel: this.props.gameChannel\n      });\n    };\n\n    this.announceBidding = (e, player, lastAmount) => {\n      //tell other players the game is moving into the bidding phase\n      this.props.pubnub.publish({\n        message: {\n          bidding: true,\n          amountBidden: e,\n          ateBy: player,\n          lastAmount: lastAmount\n        },\n        channel: this.props.gameChannel\n      });\n    };\n\n    this.annouceWinner = bidder => {\n      console.log(\"Announce winner\");\n      this.props.pubnub.publish({\n        message: {\n          success: true,\n          userName: this.props.userName,\n          reset: true\n        },\n        channel: this.props.gameChannel\n      });\n    };\n\n    this.annouceFail = bidder => {\n      this.props.pubnub.publish({\n        message: {\n          failed: true,\n          userName: this.props.userName,\n          reset: true\n        },\n        channel: this.props.gameChannel\n      });\n    };\n\n    this.myMove = e => {\n      //this.turn = this.turn === 1 ? 2 : 1;\n      this.setState({\n        whosTurn: !this.state.whosTurn\n      });\n    };\n\n    this.publishBidding = (e, player) => {\n      //Setter whos bidding til neste som skal spise\n      this.whosBidding = player + 1 === this.props.players.length ? 0 : player + 1;\n\n      if (this.whosBidding === this.props.players.indexOf(this.props.userName)) {\n        if (this.state.passBidding) {\n          this.setState({\n            whosTurn: !this.state.whosTurn\n          });\n          this.announceBidding(null, this.whosBidding, e);\n          this.setState({\n            whosTurn: !this.state.whosTurn\n          });\n        } else {\n          this.setState({\n            whosTurn: true\n          });\n          this.makeBid(e, this.whosBidding);\n        }\n      } else {\n        console.log(\"Noen andre skal spise akkuratt nå\");\n      }\n    };\n\n    this.onMakeMove = sushi => {\n      console.log(\"We are about to make a move\"); // Check if the square is empty and if it's the player's turn to make a move\n      //squares[index] = this.props.piece;\n\n      this.setState({\n        whosTurn: !this.state.whosTurn\n      });\n      console.log(\"now this player is making a move\" + this.turn);\n      console.log(\"the total capacity is\" + this.props.occupancy); // Other player's turn to make a move\n\n      this.turn = this.turn + 1 === this.props.players.length ? 0 : this.turn + 1;\n      console.log(\" next move will be made by player \" + this.props.players[this.turn]); // Publish move to the channel\n\n      this.props.pubnub.publish({\n        message: {\n          piece: this.props.piece,\n          turn: this.turn\n        },\n        channel: this.props.gameChannel\n      });\n      console.log(\"We made a move\"); //Check if there is a winner\n      //this.checkForWinner(squares);\n    };\n\n    this.makeBid = (e, player) => {\n      if (this.state.lastBidding) {\n        return;\n      }\n\n      const a = parseInt(e) + 1;\n      console.log(\"The last amount you bid was\" + this.bid);\n      Swal.fire({\n        title: \"How many pieces do you think you can eat?\",\n        input: \"number\",\n        showCancelButton: true,\n        cancelButtonText: \"Pass\",\n        cancelButtonColor: \"Orange\",\n        inputAttributes: {\n          min: a\n        },\n        confirmButtonText: \"Bid\",\n        allowOutsideClick: false\n      }).then(result => {\n        if (result.value) {\n          console.log(\"DU mener du kan spise \" + result.value);\n          this.bid = result.value;\n          this.setState({\n            whosTurn: !this.state.whosTurn\n          });\n          this.announceBidding(result.value, player);\n        } else {\n          this.setState({\n            passBidding: true,\n            bidding: false\n          });\n          console.log(\"Du har passet\");\n          this.setState({\n            whosTurn: !this.state.whosTurn\n          });\n          this.announceBidding(null, player, e);\n        }\n      });\n    };\n\n    this.showChoices = e => {\n      (async () => {\n        /* inputOptions can be an object or Promise */\n        const inputOptions = new Promise(resolve => {\n          setTimeout(() => {\n            resolve({\n              true: \"Normal sushi\",\n              false: \"Fugu sushi\",\n              eat: \"Start bidding!\"\n            });\n          }, 1000);\n        });\n\n        const _ref = await Swal.fire({\n          title: \"What sushi would you like to place?\",\n          input: \"radio\",\n          inputOptions: inputOptions,\n          allowOutsideClick: false,\n          allowEscapeKey: false,\n          confirmButtonText: \"Place sushi\",\n          inputValidator: value => {\n            if (!value) {\n              return \"You need to choose something!\";\n            } else {\n              if (value === \"true\" && !this.sushis.includes(true)) {\n                return \"You do not have enough of this type of sushi!\";\n              }\n\n              if (value === \"false\" && !this.sushis.includes(false)) {\n                return \"You do not have enough of this type of sushi!\";\n              }\n            }\n          }\n        }),\n              sushi = _ref.value;\n\n        if (sushi) {\n          if (sushi === \"eat\") {\n            this.whosBidding = this.turn;\n            this.announceBidding(0);\n            this.setState({\n              bidding: true\n            });\n            this.makeBid(0, this.whosBidding);\n          } else {\n            if (sushi === \"true\") {\n              this.state.placed.push(true);\n              this.sushis.shift();\n              console.log(\"this is what you have placed \" + this.state.placed);\n              console.log(\"And this is what you have left \" + this.sushis);\n            }\n\n            if (sushi === \"false\") {\n              this.state.placed.push(false);\n              this.sushis.pop();\n              console.log(\"this is what you have placed\" + this.state.placed);\n              console.log(\"And this is what you have left \" + this.props.players);\n            }\n\n            this.onMakeMove(sushi);\n            console.log(this.state.placed);\n            console.log(this.sushis);\n          }\n        }\n      })();\n    };\n\n    this.sendSushi = e => {\n      this.props.pubnub.publish({\n        message: {\n          clicked: true,\n          sushi: this.state.placed.pop()\n        },\n        channel: this.props.gameChannel\n      });\n      console.log(\"Sushi har blitt sendt\");\n    };\n\n    this.eatOwnSushi = placed => {\n      while (this.state.placed.length > 0) {\n        const s = this.state.placed.pop();\n\n        if (!s) {\n          this.LoosePiece();\n          this.annouceFail();\n          break;\n        } else {\n          this.bid -= 1;\n\n          if (this.bid === 0) {\n            this.annouceWinner(); // Needs to be implemented\n\n            break;\n          }\n        }\n      }\n\n      console.log(\"Vi er ferdig meg while løkken\");\n      console.log(this.bid);\n    };\n\n    this.eatSushi = sushi => {\n      console.log(\"Nå skal vi spise en sushi\");\n\n      if (!sushi) {\n        this.LoosePiece();\n        this.annouceFail(); //This person has failed the attempt and looses a piece.\n      } else if (sushi) {\n        this.bid -= 1;\n        console.log(\"Vi har trukket fra en sushi\");\n        console.log(this.bid);\n\n        if (this.bid === 0) {\n          console.log(\"Vi er inne i vinner iffen\");\n          this.annouceWinner();\n        }\n      }\n    };\n\n    this.LoosePiece = e => {\n      if (this.pieces.includes(false)) {\n        const n = Math.floor(Math.random() * this.pieces.length);\n\n        if (n === 1) {\n          this.pieces.pop();\n          console.log(\"Du mistet en fugu sushi\");\n        } else {\n          this.pieces.shift();\n          console.log(\"Du mistet en vanlig sushi\");\n        }\n      } else {\n        this.pieces.pop();\n        console.log(\"Du mistet en valig sushi siden du ikke har noen fuguer igjen\");\n      }\n    };\n\n    this.state = {\n      whosTurn: this.props.myTurn,\n      bidding: false,\n      passBidding: false,\n      lastBidding: false,\n      eatingStage: false,\n      nextRound: false,\n      placed: this.props.placed\n    };\n    this.pieces = [true, true, true, false];\n    this.sushis = [true, true, true, false];\n    this.turn = 0;\n    this.whosBidding = null;\n    this.gameOver = false;\n    this.counter = 0;\n    this.bid = 0;\n    this.passedPlayers = [];\n    this.score = new Array(this.props.players).fill(0);\n  }\n\n  componentDidMount() {\n    this.props.pubnub.getMessage(this.props.gameChannel, msg => {\n      this.turn = msg.message.turn; //Makes it the right players turn\n\n      if (this.props.players[msg.message.turn] === this.props.userName) {\n        this.myMove(msg.message.index, msg.message.piece);\n      } //Sets the game into bidding stage\n      else if (msg.message.bidding) {\n          if (msg.message.amountBidden > 0) {\n            this.publishBidding(msg.message.amountBidden, msg.message.ateBy);\n            console.log(\"Player \" + msg.message.ateBy + \"bid \" + msg.message.amountBidden);\n            this.publishBidding(msg.message.amountBidden, msg.message.ateBy);\n          } else if (msg.message.amountBidden === null) {\n            console.log(msg.message.ateBy + \" passed\");\n\n            if (!this.passedPlayers.includes(msg.message.ateBy)) {\n              this.passedPlayers.push(msg.message.ateBy);\n            }\n\n            if (this.passedPlayers.length === this.props.players.length - 1 && !this.state.passBidding) {\n              console.log(\"du er den siste som er igjen\");\n              this.setState({\n                lastBidding: true\n              });\n              this.announceEating(this.userName, this.bid);\n              Swal.close();\n            } else {\n              this.publishBidding(msg.message.lastAmount, msg.message.ateBy);\n            }\n          } else {\n            console.log(\"Vi er inne i elsen og denne spilleren skal begynne å by \" + this.whosBidding);\n            this.setState({\n              bidding: true\n            });\n          }\n\n          console.log(\"LETS START BIDDING!\");\n        } //Sets the game into the eating stage\n        else if (msg.message.eatingStage) {\n            Swal.close();\n            this.setState({\n              eatingStage: true,\n              bidding: false\n            });\n            console.log(\"eating stage\");\n          } //Eating player recives the sushi they clicked\n          else if (msg.message.clicked && this.state.lastBidding) {\n              this.eatSushi(msg.message.sushi);\n            } //Fails the eating attempt\n            else if (msg.message.failed) {\n                Swal.fire({\n                  icon: \"error\",\n                  title: \"Oops...\",\n                  text: \"The attempt failed. The atempting player will loose a random sushi.\"\n                }).then(result => {\n                  this.newRound(msg.message.userName);\n                  console.log(\"Nå ble den trykket\");\n                });\n              } //The eating attempt is a success\n              else if (msg.message.success) {\n                  this.score[this.props.players.indexOf(msg.message.userName)] += 1;\n                  Swal.fire({\n                    icon: \"success\",\n                    title: \"Wohooo!\",\n                    confirmButtonText: \"Next Round\",\n                    text: \"The attempt was a success. The atempting player will receive one point!.\"\n                  }).then(result => {\n                    this.newRound(msg.message.userName);\n                    console.log(\"Nå ble den trykket\");\n                  });\n                  console.log(\"The bet was successfull\");\n                } // End the game and go back to the lobby\n                else if (msg.message.endGame) {\n                    Swal.close();\n                    this.props.endGame();\n                  }\n    });\n  }\n\n  render() {\n    let status; // Change to current player's turn\n\n    status = \"\".concat(this.state.whosTurn ? \"Your turn\" : \"Opponent's turn\");\n    return React.createElement(\"div\", {\n      className: \"game\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446\n      },\n      __self: this\n    }, !this.state.eatingStage && React.createElement(\"div\", {\n      className: \"board\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 448\n      },\n      __self: this\n    }, React.createElement(Board, {\n      squares: this.state.squares //onClick={index => this.onMakeMove(index)}\n      ,\n      placed: this.state.placed,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 449\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"functions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"status-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455\n      },\n      __self: this\n    }, status), React.createElement(\"button\", {\n      className: \"move-button\",\n      disabled: !this.state.whosTurn,\n      onClick: e => this.showChoices(),\n      hidden: this.state.bidding || this.state.passBidding || this.state.eatingStage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 456\n      },\n      __self: this\n    }, \" \", \"Make move\"))), this.state.eatingStage && React.createElement(EatingBoard, {\n      squares: this.state.squares,\n      onClick: e => this.sendSushi(),\n      placed: this.state.placed,\n      lastBidding: this.state.lastBidding,\n      eatOwn: e => this.eatOwnSushi(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Game;","map":{"version":3,"sources":["/Users/Johan/fugu/src/Game.js"],"names":["React","Board","EatingBoard","Swal","throwStatement","Game","Component","constructor","props","newRound","player","console","log","score","state","lastBidding","setState","whosTurn","bidding","passBidding","eatingStage","placed","piecesClone","pieces","sushis","bid","turn","players","indexOf","userName","whosBidding","passedPlayers","announceEating","amount","pubnub","publish","message","whoEating","channel","gameChannel","announceBidding","e","lastAmount","amountBidden","ateBy","annouceWinner","bidder","success","reset","annouceFail","failed","myMove","publishBidding","length","makeBid","onMakeMove","sushi","occupancy","piece","a","parseInt","fire","title","input","showCancelButton","cancelButtonText","cancelButtonColor","inputAttributes","min","confirmButtonText","allowOutsideClick","then","result","value","showChoices","inputOptions","Promise","resolve","setTimeout","true","false","eat","allowEscapeKey","inputValidator","includes","push","shift","pop","sendSushi","clicked","eatOwnSushi","s","LoosePiece","eatSushi","n","Math","floor","random","myTurn","nextRound","gameOver","counter","Array","fill","componentDidMount","getMessage","msg","index","close","icon","text","endGame","render","status","squares"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,SAASC,cAAT,QAA+B,cAA/B;;AAEA,MAAMC,IAAN,SAAmBL,KAAK,CAACM,SAAzB,CAAmC;AACjCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAmHnBC,QAnHmB,GAmHRC,MAAM,IAAI;AACnBC,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAiB,KAAKC,KAAlC;;AAEA,UAAI,KAAKC,KAAL,CAAWC,WAAf,EAA4B;AAC1B;AACA,aAAKC,QAAL,CAAc;AACZC,UAAAA,QAAQ,EAAE,IADE;AAEZC,UAAAA,OAAO,EAAE,KAFG;AAGZC,UAAAA,WAAW,EAAE,KAHD;AAIZJ,UAAAA,WAAW,EAAE,KAJD;AAKZK,UAAAA,WAAW,EAAE,KALD;AAMZC,UAAAA,MAAM,EAAE;AANI,SAAd;AAQA,cAAMC,WAAW,GAAG,CAAC,GAAG,KAAKC,MAAT,CAApB;AACA,aAAKC,MAAL,GAAcF,WAAd;AACA,aAAKG,GAAL,GAAW,CAAX;AACA,aAAKC,IAAL,GAAY,KAAKlB,KAAL,CAAWmB,OAAX,CAAmBC,OAAnB,CAA2B,KAAKpB,KAAL,CAAWqB,QAAtC,CAAZ;AACA,aAAKC,WAAL,GAAmB,IAAnB;AACA,aAAKC,aAAL,GAAqB,EAArB;AACD,OAhBD,MAgBO;AACL;AACApB,QAAAA,OAAO,CAACC,GAAR,CAAY,uCAAZ;AACA,aAAKI,QAAL,CAAc;AACZC,UAAAA,QAAQ,EAAE,KADE;AAEZC,UAAAA,OAAO,EAAE,KAFG;AAGZC,UAAAA,WAAW,EAAE,KAHD;AAIZJ,UAAAA,WAAW,EAAE,KAJD;AAKZK,UAAAA,WAAW,EAAE,KALD;AAMZC,UAAAA,MAAM,EAAE;AANI,SAAd;AAQA,cAAMC,WAAW,GAAG,CAAC,GAAG,KAAKC,MAAT,CAApB;AACA,aAAKC,MAAL,GAAcF,WAAd;AACA,aAAKI,IAAL,GAAY,KAAKlB,KAAL,CAAWmB,OAAX,CAAmBC,OAAnB,CAA2BlB,MAA3B,CAAZ;AACA,aAAKe,GAAL,GAAW,CAAX;AACA,aAAKK,WAAL,GAAmB,IAAnB;AACA,aAAKC,aAAL,GAAqB,EAArB;AACD;AACF,KAzJkB;;AAAA,SA0JnBC,cA1JmB,GA0JF,CAACtB,MAAD,EAASuB,MAAT,KAAoB;AACnC,WAAKzB,KAAL,CAAW0B,MAAX,CAAkBC,OAAlB,CAA0B;AACxBC,QAAAA,OAAO,EAAE;AACPhB,UAAAA,WAAW,EAAE,IADN;AAEPiB,UAAAA,SAAS,EAAE3B,MAFJ;AAGPuB,UAAAA,MAAM,EAAEA,MAHD;AAIPf,UAAAA,OAAO,EAAE;AAJF,SADe;AAOxBoB,QAAAA,OAAO,EAAE,KAAK9B,KAAL,CAAW+B;AAPI,OAA1B;AASD,KApKkB;;AAAA,SAsKnBC,eAtKmB,GAsKD,CAACC,CAAD,EAAI/B,MAAJ,EAAYgC,UAAZ,KAA2B;AAC3C;AACA,WAAKlC,KAAL,CAAW0B,MAAX,CAAkBC,OAAlB,CAA0B;AACxBC,QAAAA,OAAO,EAAE;AACPlB,UAAAA,OAAO,EAAE,IADF;AAEPyB,UAAAA,YAAY,EAAEF,CAFP;AAGPG,UAAAA,KAAK,EAAElC,MAHA;AAIPgC,UAAAA,UAAU,EAAEA;AAJL,SADe;AAOxBJ,QAAAA,OAAO,EAAE,KAAK9B,KAAL,CAAW+B;AAPI,OAA1B;AASD,KAjLkB;;AAAA,SAmLnBM,aAnLmB,GAmLHC,MAAM,IAAI;AACxBnC,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACA,WAAKJ,KAAL,CAAW0B,MAAX,CAAkBC,OAAlB,CAA0B;AACxBC,QAAAA,OAAO,EAAE;AACPW,UAAAA,OAAO,EAAE,IADF;AAEPlB,UAAAA,QAAQ,EAAE,KAAKrB,KAAL,CAAWqB,QAFd;AAGPmB,UAAAA,KAAK,EAAE;AAHA,SADe;AAMxBV,QAAAA,OAAO,EAAE,KAAK9B,KAAL,CAAW+B;AANI,OAA1B;AAQD,KA7LkB;;AAAA,SA8LnBU,WA9LmB,GA8LLH,MAAM,IAAI;AACtB,WAAKtC,KAAL,CAAW0B,MAAX,CAAkBC,OAAlB,CAA0B;AACxBC,QAAAA,OAAO,EAAE;AACPc,UAAAA,MAAM,EAAE,IADD;AAEPrB,UAAAA,QAAQ,EAAE,KAAKrB,KAAL,CAAWqB,QAFd;AAGPmB,UAAAA,KAAK,EAAE;AAHA,SADe;AAMxBV,QAAAA,OAAO,EAAE,KAAK9B,KAAL,CAAW+B;AANI,OAA1B;AAQD,KAvMkB;;AAAA,SA0MnBY,MA1MmB,GA0MVV,CAAC,IAAI;AACZ;AACA,WAAKzB,QAAL,CAAc;AACZC,QAAAA,QAAQ,EAAE,CAAC,KAAKH,KAAL,CAAWG;AADV,OAAd;AAGD,KA/MkB;;AAAA,SAiNnBmC,cAjNmB,GAiNF,CAACX,CAAD,EAAI/B,MAAJ,KAAe;AAC9B;AACA,WAAKoB,WAAL,GACEpB,MAAM,GAAG,CAAT,KAAe,KAAKF,KAAL,CAAWmB,OAAX,CAAmB0B,MAAlC,GAA2C,CAA3C,GAA+C3C,MAAM,GAAG,CAD1D;;AAEA,UAAI,KAAKoB,WAAL,KAAqB,KAAKtB,KAAL,CAAWmB,OAAX,CAAmBC,OAAnB,CAA2B,KAAKpB,KAAL,CAAWqB,QAAtC,CAAzB,EAA0E;AACxE,YAAI,KAAKf,KAAL,CAAWK,WAAf,EAA4B;AAC1B,eAAKH,QAAL,CAAc;AACZC,YAAAA,QAAQ,EAAE,CAAC,KAAKH,KAAL,CAAWG;AADV,WAAd;AAGA,eAAKuB,eAAL,CAAqB,IAArB,EAA2B,KAAKV,WAAhC,EAA6CW,CAA7C;AACA,eAAKzB,QAAL,CAAc;AACZC,YAAAA,QAAQ,EAAE,CAAC,KAAKH,KAAL,CAAWG;AADV,WAAd;AAGD,SARD,MAQO;AACL,eAAKD,QAAL,CAAc;AACZC,YAAAA,QAAQ,EAAE;AADE,WAAd;AAGA,eAAKqC,OAAL,CAAab,CAAb,EAAgB,KAAKX,WAArB;AACD;AACF,OAfD,MAeO;AACLnB,QAAAA,OAAO,CAACC,GAAR,CAAY,mCAAZ;AACD;AACF,KAvOkB;;AAAA,SAyOnB2C,UAzOmB,GAyONC,KAAK,IAAI;AACpB7C,MAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EADoB,CAGpB;AAEA;;AAEA,WAAKI,QAAL,CAAc;AACZC,QAAAA,QAAQ,EAAE,CAAC,KAAKH,KAAL,CAAWG;AADV,OAAd;AAGAN,MAAAA,OAAO,CAACC,GAAR,CAAY,qCAAqC,KAAKc,IAAtD;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAA0B,KAAKJ,KAAL,CAAWiD,SAAjD,EAXoB,CAapB;;AACA,WAAK/B,IAAL,GAAY,KAAKA,IAAL,GAAY,CAAZ,KAAkB,KAAKlB,KAAL,CAAWmB,OAAX,CAAmB0B,MAArC,GAA8C,CAA9C,GAAkD,KAAK3B,IAAL,GAAY,CAA1E;AACAf,MAAAA,OAAO,CAACC,GAAR,CACE,uCAAuC,KAAKJ,KAAL,CAAWmB,OAAX,CAAmB,KAAKD,IAAxB,CADzC,EAfoB,CAmBpB;;AACA,WAAKlB,KAAL,CAAW0B,MAAX,CAAkBC,OAAlB,CAA0B;AACxBC,QAAAA,OAAO,EAAE;AACPsB,UAAAA,KAAK,EAAE,KAAKlD,KAAL,CAAWkD,KADX;AAEPhC,UAAAA,IAAI,EAAE,KAAKA;AAFJ,SADe;AAKxBY,QAAAA,OAAO,EAAE,KAAK9B,KAAL,CAAW+B;AALI,OAA1B;AAOA5B,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EA3BoB,CA6BpB;AACA;AACD,KAxQkB;;AAAA,SAyQnB0C,OAzQmB,GAyQT,CAACb,CAAD,EAAI/B,MAAJ,KAAe;AACvB,UAAI,KAAKI,KAAL,CAAWC,WAAf,EAA4B;AAC1B;AACD;;AACD,YAAM4C,CAAC,GAAGC,QAAQ,CAACnB,CAAD,CAAR,GAAc,CAAxB;AACA9B,MAAAA,OAAO,CAACC,GAAR,CAAY,gCAAgC,KAAKa,GAAjD;AACAtB,MAAAA,IAAI,CAAC0D,IAAL,CAAU;AACRC,QAAAA,KAAK,EAAE,2CADC;AAERC,QAAAA,KAAK,EAAE,QAFC;AAGRC,QAAAA,gBAAgB,EAAE,IAHV;AAIRC,QAAAA,gBAAgB,EAAE,MAJV;AAKRC,QAAAA,iBAAiB,EAAE,QALX;AAMRC,QAAAA,eAAe,EAAE;AACfC,UAAAA,GAAG,EAAET;AADU,SANT;AASRU,QAAAA,iBAAiB,EAAE,KATX;AAURC,QAAAA,iBAAiB,EAAE;AAVX,OAAV,EAWGC,IAXH,CAWQC,MAAM,IAAI;AAChB,YAAIA,MAAM,CAACC,KAAX,EAAkB;AAChB9D,UAAAA,OAAO,CAACC,GAAR,CAAY,2BAA2B4D,MAAM,CAACC,KAA9C;AACA,eAAKhD,GAAL,GAAW+C,MAAM,CAACC,KAAlB;AACA,eAAKzD,QAAL,CAAc;AACZC,YAAAA,QAAQ,EAAE,CAAC,KAAKH,KAAL,CAAWG;AADV,WAAd;AAGA,eAAKuB,eAAL,CAAqBgC,MAAM,CAACC,KAA5B,EAAmC/D,MAAnC;AACD,SAPD,MAOO;AACL,eAAKM,QAAL,CAAc;AACZG,YAAAA,WAAW,EAAE,IADD;AAEZD,YAAAA,OAAO,EAAE;AAFG,WAAd;AAIAP,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACA,eAAKI,QAAL,CAAc;AACZC,YAAAA,QAAQ,EAAE,CAAC,KAAKH,KAAL,CAAWG;AADV,WAAd;AAGA,eAAKuB,eAAL,CAAqB,IAArB,EAA2B9B,MAA3B,EAAmC+B,CAAnC;AACD;AACF,OA9BD;AA+BD,KA9SkB;;AAAA,SAgTnBiC,WAhTmB,GAgTLjC,CAAC,IAAI;AACjB,OAAC,YAAY;AACX;AACA,cAAMkC,YAAY,GAAG,IAAIC,OAAJ,CAAYC,OAAO,IAAI;AAC1CC,UAAAA,UAAU,CAAC,MAAM;AACfD,YAAAA,OAAO,CAAC;AACNE,cAAAA,IAAI,EAAE,cADA;AAENC,cAAAA,KAAK,EAAE,YAFD;AAGNC,cAAAA,GAAG,EAAE;AAHC,aAAD,CAAP;AAKD,WANS,EAMP,IANO,CAAV;AAOD,SARoB,CAArB;;AAFW,qBAYc,MAAM9E,IAAI,CAAC0D,IAAL,CAAU;AACvCC,UAAAA,KAAK,EAAE,qCADgC;AAEvCC,UAAAA,KAAK,EAAE,OAFgC;AAGvCY,UAAAA,YAAY,EAAEA,YAHyB;AAIvCL,UAAAA,iBAAiB,EAAE,KAJoB;AAKvCY,UAAAA,cAAc,EAAE,KALuB;AAMvCb,UAAAA,iBAAiB,EAAE,aANoB;AAOvCc,UAAAA,cAAc,EAAEV,KAAK,IAAI;AACvB,gBAAI,CAACA,KAAL,EAAY;AACV,qBAAO,+BAAP;AACD,aAFD,MAEO;AACL,kBAAIA,KAAK,KAAK,MAAV,IAAoB,CAAC,KAAKjD,MAAL,CAAY4D,QAAZ,CAAqB,IAArB,CAAzB,EAAqD;AACnD,uBAAO,+CAAP;AACD;;AAED,kBAAIX,KAAK,KAAK,OAAV,IAAqB,CAAC,KAAKjD,MAAL,CAAY4D,QAAZ,CAAqB,KAArB,CAA1B,EAAuD;AACrD,uBAAO,+CAAP;AACD;AACF;AACF;AAnBsC,SAAV,CAZpB;AAAA,cAYI5B,KAZJ,QAYHiB,KAZG;;AAkCX,YAAIjB,KAAJ,EAAW;AACT,cAAIA,KAAK,KAAK,KAAd,EAAqB;AACnB,iBAAK1B,WAAL,GAAmB,KAAKJ,IAAxB;AACA,iBAAKc,eAAL,CAAqB,CAArB;AACA,iBAAKxB,QAAL,CAAc;AACZE,cAAAA,OAAO,EAAE;AADG,aAAd;AAGA,iBAAKoC,OAAL,CAAa,CAAb,EAAgB,KAAKxB,WAArB;AACD,WAPD,MAOO;AACL,gBAAI0B,KAAK,KAAK,MAAd,EAAsB;AACpB,mBAAK1C,KAAL,CAAWO,MAAX,CAAkBgE,IAAlB,CAAuB,IAAvB;AACA,mBAAK7D,MAAL,CAAY8D,KAAZ;AACA3E,cAAAA,OAAO,CAACC,GAAR,CAAY,kCAAkC,KAAKE,KAAL,CAAWO,MAAzD;AACAV,cAAAA,OAAO,CAACC,GAAR,CAAY,oCAAoC,KAAKY,MAArD;AACD;;AACD,gBAAIgC,KAAK,KAAK,OAAd,EAAuB;AACrB,mBAAK1C,KAAL,CAAWO,MAAX,CAAkBgE,IAAlB,CAAuB,KAAvB;AACA,mBAAK7D,MAAL,CAAY+D,GAAZ;AACA5E,cAAAA,OAAO,CAACC,GAAR,CAAY,iCAAiC,KAAKE,KAAL,CAAWO,MAAxD;AACAV,cAAAA,OAAO,CAACC,GAAR,CAAY,oCAAoC,KAAKJ,KAAL,CAAWmB,OAA3D;AACD;;AACD,iBAAK4B,UAAL,CAAgBC,KAAhB;AACA7C,YAAAA,OAAO,CAACC,GAAR,CAAY,KAAKE,KAAL,CAAWO,MAAvB;AACAV,YAAAA,OAAO,CAACC,GAAR,CAAY,KAAKY,MAAjB;AACD;AACF;AACF,OA5DD;AA6DD,KA9WkB;;AAAA,SAgXnBgE,SAhXmB,GAgXP/C,CAAC,IAAI;AACf,WAAKjC,KAAL,CAAW0B,MAAX,CAAkBC,OAAlB,CAA0B;AACxBC,QAAAA,OAAO,EAAE;AACPqD,UAAAA,OAAO,EAAE,IADF;AAEPjC,UAAAA,KAAK,EAAE,KAAK1C,KAAL,CAAWO,MAAX,CAAkBkE,GAAlB;AAFA,SADe;AAKxBjD,QAAAA,OAAO,EAAE,KAAK9B,KAAL,CAAW+B;AALI,OAA1B;AAOA5B,MAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACD,KAzXkB;;AAAA,SA2XnB8E,WA3XmB,GA2XLrE,MAAM,IAAI;AACtB,aAAO,KAAKP,KAAL,CAAWO,MAAX,CAAkBgC,MAAlB,GAA2B,CAAlC,EAAqC;AACnC,cAAMsC,CAAC,GAAG,KAAK7E,KAAL,CAAWO,MAAX,CAAkBkE,GAAlB,EAAV;;AACA,YAAI,CAACI,CAAL,EAAQ;AACN,eAAKC,UAAL;AACA,eAAK3C,WAAL;AACA;AACD,SAJD,MAIO;AACL,eAAKxB,GAAL,IAAY,CAAZ;;AACA,cAAI,KAAKA,GAAL,KAAa,CAAjB,EAAoB;AAClB,iBAAKoB,aAAL,GADkB,CACI;;AACtB;AACD;AACF;AACF;;AACDlC,MAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKa,GAAjB;AACD,KA5YkB;;AAAA,SA8YnBoE,QA9YmB,GA8YRrC,KAAK,IAAI;AAClB7C,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;;AACA,UAAI,CAAC4C,KAAL,EAAY;AACV,aAAKoC,UAAL;AACA,aAAK3C,WAAL,GAFU,CAEU;AACrB,OAHD,MAGO,IAAIO,KAAJ,EAAW;AAChB,aAAK/B,GAAL,IAAY,CAAZ;AACAd,QAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKa,GAAjB;;AACA,YAAI,KAAKA,GAAL,KAAa,CAAjB,EAAoB;AAClBd,UAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACA,eAAKiC,aAAL;AACD;AACF;AACF,KA5ZkB;;AAAA,SA8ZnB+C,UA9ZmB,GA8ZNnD,CAAC,IAAI;AAChB,UAAI,KAAKlB,MAAL,CAAY6D,QAAZ,CAAqB,KAArB,CAAJ,EAAiC;AAC/B,cAAMU,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,KAAK1E,MAAL,CAAY8B,MAAvC,CAAV;;AACA,YAAIyC,CAAC,KAAK,CAAV,EAAa;AACX,eAAKvE,MAAL,CAAYgE,GAAZ;AACA5E,UAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACD,SAHD,MAGO;AACL,eAAKW,MAAL,CAAY+D,KAAZ;AACA3E,UAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACD;AACF,OATD,MASO;AACL,aAAKW,MAAL,CAAYgE,GAAZ;AACA5E,QAAAA,OAAO,CAACC,GAAR,CACE,8DADF;AAGD;AACF,KA9akB;;AAEjB,SAAKE,KAAL,GAAa;AACXG,MAAAA,QAAQ,EAAE,KAAKT,KAAL,CAAW0F,MADV;AAEXhF,MAAAA,OAAO,EAAE,KAFE;AAGXC,MAAAA,WAAW,EAAE,KAHF;AAIXJ,MAAAA,WAAW,EAAE,KAJF;AAKXK,MAAAA,WAAW,EAAE,KALF;AAMX+E,MAAAA,SAAS,EAAE,KANA;AAOX9E,MAAAA,MAAM,EAAE,KAAKb,KAAL,CAAWa;AAPR,KAAb;AASA,SAAKE,MAAL,GAAc,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,KAAnB,CAAd;AACA,SAAKC,MAAL,GAAc,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,KAAnB,CAAd;AACA,SAAKE,IAAL,GAAY,CAAZ;AACA,SAAKI,WAAL,GAAmB,IAAnB;AACA,SAAKsE,QAAL,GAAgB,KAAhB;AACA,SAAKC,OAAL,GAAe,CAAf;AACA,SAAK5E,GAAL,GAAW,CAAX;AACA,SAAKM,aAAL,GAAqB,EAArB;AACA,SAAKlB,KAAL,GAAa,IAAIyF,KAAJ,CAAU,KAAK9F,KAAL,CAAWmB,OAArB,EAA8B4E,IAA9B,CAAmC,CAAnC,CAAb;AACD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,SAAKhG,KAAL,CAAW0B,MAAX,CAAkBuE,UAAlB,CAA6B,KAAKjG,KAAL,CAAW+B,WAAxC,EAAqDmE,GAAG,IAAI;AAC1D,WAAKhF,IAAL,GAAYgF,GAAG,CAACtE,OAAJ,CAAYV,IAAxB,CAD0D,CAE1D;;AACA,UAAI,KAAKlB,KAAL,CAAWmB,OAAX,CAAmB+E,GAAG,CAACtE,OAAJ,CAAYV,IAA/B,MAAyC,KAAKlB,KAAL,CAAWqB,QAAxD,EAAkE;AAChE,aAAKsB,MAAL,CAAYuD,GAAG,CAACtE,OAAJ,CAAYuE,KAAxB,EAA+BD,GAAG,CAACtE,OAAJ,CAAYsB,KAA3C;AACD,OAFD,CAGA;AAHA,WAIK,IAAIgD,GAAG,CAACtE,OAAJ,CAAYlB,OAAhB,EAAyB;AAC5B,cAAIwF,GAAG,CAACtE,OAAJ,CAAYO,YAAZ,GAA2B,CAA/B,EAAkC;AAChC,iBAAKS,cAAL,CAAoBsD,GAAG,CAACtE,OAAJ,CAAYO,YAAhC,EAA8C+D,GAAG,CAACtE,OAAJ,CAAYQ,KAA1D;AACAjC,YAAAA,OAAO,CAACC,GAAR,CACE,YAAY8F,GAAG,CAACtE,OAAJ,CAAYQ,KAAxB,GAAgC,MAAhC,GAAyC8D,GAAG,CAACtE,OAAJ,CAAYO,YADvD;AAGA,iBAAKS,cAAL,CAAoBsD,GAAG,CAACtE,OAAJ,CAAYO,YAAhC,EAA8C+D,GAAG,CAACtE,OAAJ,CAAYQ,KAA1D;AACD,WAND,MAMO,IAAI8D,GAAG,CAACtE,OAAJ,CAAYO,YAAZ,KAA6B,IAAjC,EAAuC;AAC5ChC,YAAAA,OAAO,CAACC,GAAR,CAAY8F,GAAG,CAACtE,OAAJ,CAAYQ,KAAZ,GAAoB,SAAhC;;AACA,gBAAI,CAAC,KAAKb,aAAL,CAAmBqD,QAAnB,CAA4BsB,GAAG,CAACtE,OAAJ,CAAYQ,KAAxC,CAAL,EAAqD;AACnD,mBAAKb,aAAL,CAAmBsD,IAAnB,CAAwBqB,GAAG,CAACtE,OAAJ,CAAYQ,KAApC;AACD;;AAED,gBACE,KAAKb,aAAL,CAAmBsB,MAAnB,KAA8B,KAAK7C,KAAL,CAAWmB,OAAX,CAAmB0B,MAAnB,GAA4B,CAA1D,IACA,CAAC,KAAKvC,KAAL,CAAWK,WAFd,EAGE;AACAR,cAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ;AACA,mBAAKI,QAAL,CAAc;AACZD,gBAAAA,WAAW,EAAE;AADD,eAAd;AAGA,mBAAKiB,cAAL,CAAoB,KAAKH,QAAzB,EAAmC,KAAKJ,GAAxC;AACAtB,cAAAA,IAAI,CAACyG,KAAL;AACD,aAVD,MAUO;AACL,mBAAKxD,cAAL,CAAoBsD,GAAG,CAACtE,OAAJ,CAAYM,UAAhC,EAA4CgE,GAAG,CAACtE,OAAJ,CAAYQ,KAAxD;AACD;AACF,WAnBM,MAmBA;AACLjC,YAAAA,OAAO,CAACC,GAAR,CACE,6DACE,KAAKkB,WAFT;AAIA,iBAAKd,QAAL,CAAc;AACZE,cAAAA,OAAO,EAAE;AADG,aAAd;AAGD;;AACDP,UAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACD,SApCI,CAqCL;AArCK,aAsCA,IAAI8F,GAAG,CAACtE,OAAJ,CAAYhB,WAAhB,EAA6B;AAChCjB,YAAAA,IAAI,CAACyG,KAAL;AACA,iBAAK5F,QAAL,CAAc;AACZI,cAAAA,WAAW,EAAE,IADD;AAEZF,cAAAA,OAAO,EAAE;AAFG,aAAd;AAIAP,YAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACD,WAPI,CAQL;AARK,eASA,IAAI8F,GAAG,CAACtE,OAAJ,CAAYqD,OAAZ,IAAuB,KAAK3E,KAAL,CAAWC,WAAtC,EAAmD;AACtD,mBAAK8E,QAAL,CAAca,GAAG,CAACtE,OAAJ,CAAYoB,KAA1B;AACD,aAFI,CAGL;AAHK,iBAIA,IAAIkD,GAAG,CAACtE,OAAJ,CAAYc,MAAhB,EAAwB;AAC3B/C,gBAAAA,IAAI,CAAC0D,IAAL,CAAU;AACRgD,kBAAAA,IAAI,EAAE,OADE;AAER/C,kBAAAA,KAAK,EAAE,SAFC;AAGRgD,kBAAAA,IAAI,EACF;AAJM,iBAAV,EAKGvC,IALH,CAKQC,MAAM,IAAI;AAChB,uBAAK/D,QAAL,CAAciG,GAAG,CAACtE,OAAJ,CAAYP,QAA1B;AACAlB,kBAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACD,iBARD;AASD,eAVI,CAWL;AAXK,mBAYA,IAAI8F,GAAG,CAACtE,OAAJ,CAAYW,OAAhB,EAAyB;AAC5B,uBAAKlC,KAAL,CAAW,KAAKL,KAAL,CAAWmB,OAAX,CAAmBC,OAAnB,CAA2B8E,GAAG,CAACtE,OAAJ,CAAYP,QAAvC,CAAX,KAAgE,CAAhE;AACA1B,kBAAAA,IAAI,CAAC0D,IAAL,CAAU;AACRgD,oBAAAA,IAAI,EAAE,SADE;AAER/C,oBAAAA,KAAK,EAAE,SAFC;AAGRO,oBAAAA,iBAAiB,EAAE,YAHX;AAIRyC,oBAAAA,IAAI,EACF;AALM,mBAAV,EAMGvC,IANH,CAMQC,MAAM,IAAI;AAChB,yBAAK/D,QAAL,CAAciG,GAAG,CAACtE,OAAJ,CAAYP,QAA1B;AACAlB,oBAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACD,mBATD;AAUAD,kBAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACD,iBAbI,CAeL;AAfK,qBAgBA,IAAI8F,GAAG,CAACtE,OAAJ,CAAY2E,OAAhB,EAAyB;AAC5B5G,oBAAAA,IAAI,CAACyG,KAAL;AACA,yBAAKpG,KAAL,CAAWuG,OAAX;AACD;AACF,KA1FD;AA2FD;;AA8TDC,EAAAA,MAAM,GAAG;AACP,QAAIC,MAAJ,CADO,CAEP;;AACAA,IAAAA,MAAM,aAAM,KAAKnG,KAAL,CAAWG,QAAX,GAAsB,WAAtB,GAAoC,iBAA1C,CAAN;AAEA,WACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,CAAC,KAAKH,KAAL,CAAWM,WAAZ,IACC;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,KAAD;AACE,MAAA,OAAO,EAAE,KAAKN,KAAL,CAAWoG,OADtB,CAEE;AAFF;AAGE,MAAA,MAAM,EAAE,KAAKpG,KAAL,CAAWO,MAHrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAME;AAAK,MAAA,EAAE,EAAC,WAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,SAAS,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA4B4F,MAA5B,CADF,EAEE;AACE,MAAA,SAAS,EAAC,aADZ;AAEE,MAAA,QAAQ,EAAE,CAAC,KAAKnG,KAAL,CAAWG,QAFxB;AAGE,MAAA,OAAO,EAAEwB,CAAC,IAAI,KAAKiC,WAAL,EAHhB;AAIE,MAAA,MAAM,EACJ,KAAK5D,KAAL,CAAWI,OAAX,IACA,KAAKJ,KAAL,CAAWK,WADX,IAEA,KAAKL,KAAL,CAAWM,WAPf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAUG,GAVH,cAFF,CANF,CAFJ,EA0BG,KAAKN,KAAL,CAAWM,WAAX,IACC,oBAAC,WAAD;AACE,MAAA,OAAO,EAAE,KAAKN,KAAL,CAAWoG,OADtB;AAEE,MAAA,OAAO,EAAEzE,CAAC,IAAI,KAAK+C,SAAL,EAFhB;AAGE,MAAA,MAAM,EAAE,KAAK1E,KAAL,CAAWO,MAHrB;AAIE,MAAA,WAAW,EAAE,KAAKP,KAAL,CAAWC,WAJ1B;AAKE,MAAA,MAAM,EAAE0B,CAAC,IAAI,KAAKiD,WAAL,EALf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA3BJ,CADF;AAsCD;;AA5dgC;;AA+dnC,eAAerF,IAAf","sourcesContent":["import React from \"react\";\nimport Board from \"./Board\";\nimport EatingBoard from \"./EatingBoard\";\nimport Swal from \"sweetalert2\";\nimport { throwStatement } from \"@babel/types\";\n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      whosTurn: this.props.myTurn,\n      bidding: false,\n      passBidding: false,\n      lastBidding: false,\n      eatingStage: false,\n      nextRound: false,\n      placed: this.props.placed\n    };\n    this.pieces = [true, true, true, false];\n    this.sushis = [true, true, true, false];\n    this.turn = 0;\n    this.whosBidding = null;\n    this.gameOver = false;\n    this.counter = 0;\n    this.bid = 0;\n    this.passedPlayers = [];\n    this.score = new Array(this.props.players).fill(0);\n  }\n\n  componentDidMount() {\n    this.props.pubnub.getMessage(this.props.gameChannel, msg => {\n      this.turn = msg.message.turn;\n      //Makes it the right players turn\n      if (this.props.players[msg.message.turn] === this.props.userName) {\n        this.myMove(msg.message.index, msg.message.piece);\n      }\n      //Sets the game into bidding stage\n      else if (msg.message.bidding) {\n        if (msg.message.amountBidden > 0) {\n          this.publishBidding(msg.message.amountBidden, msg.message.ateBy);\n          console.log(\n            \"Player \" + msg.message.ateBy + \"bid \" + msg.message.amountBidden\n          );\n          this.publishBidding(msg.message.amountBidden, msg.message.ateBy);\n        } else if (msg.message.amountBidden === null) {\n          console.log(msg.message.ateBy + \" passed\");\n          if (!this.passedPlayers.includes(msg.message.ateBy)) {\n            this.passedPlayers.push(msg.message.ateBy);\n          }\n\n          if (\n            this.passedPlayers.length === this.props.players.length - 1 &&\n            !this.state.passBidding\n          ) {\n            console.log(\"du er den siste som er igjen\");\n            this.setState({\n              lastBidding: true\n            });\n            this.announceEating(this.userName, this.bid);\n            Swal.close();\n          } else {\n            this.publishBidding(msg.message.lastAmount, msg.message.ateBy);\n          }\n        } else {\n          console.log(\n            \"Vi er inne i elsen og denne spilleren skal begynne å by \" +\n              this.whosBidding\n          );\n          this.setState({\n            bidding: true\n          });\n        }\n        console.log(\"LETS START BIDDING!\");\n      }\n      //Sets the game into the eating stage\n      else if (msg.message.eatingStage) {\n        Swal.close();\n        this.setState({\n          eatingStage: true,\n          bidding: false\n        });\n        console.log(\"eating stage\");\n      }\n      //Eating player recives the sushi they clicked\n      else if (msg.message.clicked && this.state.lastBidding) {\n        this.eatSushi(msg.message.sushi);\n      }\n      //Fails the eating attempt\n      else if (msg.message.failed) {\n        Swal.fire({\n          icon: \"error\",\n          title: \"Oops...\",\n          text:\n            \"The attempt failed. The atempting player will loose a random sushi.\"\n        }).then(result => {\n          this.newRound(msg.message.userName);\n          console.log(\"Nå ble den trykket\");\n        });\n      }\n      //The eating attempt is a success\n      else if (msg.message.success) {\n        this.score[this.props.players.indexOf(msg.message.userName)] += 1;\n        Swal.fire({\n          icon: \"success\",\n          title: \"Wohooo!\",\n          confirmButtonText: \"Next Round\",\n          text:\n            \"The attempt was a success. The atempting player will receive one point!.\"\n        }).then(result => {\n          this.newRound(msg.message.userName);\n          console.log(\"Nå ble den trykket\");\n        });\n        console.log(\"The bet was successfull\");\n      }\n\n      // End the game and go back to the lobby\n      else if (msg.message.endGame) {\n        Swal.close();\n        this.props.endGame();\n      }\n    });\n  }\n  newRound = player => {\n    console.log(\"NEW ROUND BLIR KJØRT\");\n    console.log(\"The score is\" + this.score);\n\n    if (this.state.lastBidding) {\n      //Makes the one who bidded highest last round start\n      this.setState({\n        whosTurn: true,\n        bidding: false,\n        passBidding: false,\n        lastBidding: false,\n        eatingStage: false,\n        placed: []\n      });\n      const piecesClone = [...this.pieces];\n      this.sushis = piecesClone;\n      this.bid = 0;\n      this.turn = this.props.players.indexOf(this.props.userName);\n      this.whosBidding = null;\n      this.passedPlayers = [];\n    } else {\n      // Resets for everyone else\n      console.log(\"nullstiller for ikke høyeste budgiver\");\n      this.setState({\n        whosTurn: false,\n        bidding: false,\n        passBidding: false,\n        lastBidding: false,\n        eatingStage: false,\n        placed: []\n      });\n      const piecesClone = [...this.pieces];\n      this.sushis = piecesClone;\n      this.turn = this.props.players.indexOf(player);\n      this.bid = 0;\n      this.whosBidding = null;\n      this.passedPlayers = [];\n    }\n  };\n  announceEating = (player, amount) => {\n    this.props.pubnub.publish({\n      message: {\n        eatingStage: true,\n        whoEating: player,\n        amount: amount,\n        bidding: false\n      },\n      channel: this.props.gameChannel\n    });\n  };\n\n  announceBidding = (e, player, lastAmount) => {\n    //tell other players the game is moving into the bidding phase\n    this.props.pubnub.publish({\n      message: {\n        bidding: true,\n        amountBidden: e,\n        ateBy: player,\n        lastAmount: lastAmount\n      },\n      channel: this.props.gameChannel\n    });\n  };\n\n  annouceWinner = bidder => {\n    console.log(\"Announce winner\");\n    this.props.pubnub.publish({\n      message: {\n        success: true,\n        userName: this.props.userName,\n        reset: true\n      },\n      channel: this.props.gameChannel\n    });\n  };\n  annouceFail = bidder => {\n    this.props.pubnub.publish({\n      message: {\n        failed: true,\n        userName: this.props.userName,\n        reset: true\n      },\n      channel: this.props.gameChannel\n    });\n  };\n\n  // Opponent's move is annpunced\n  myMove = e => {\n    //this.turn = this.turn === 1 ? 2 : 1;\n    this.setState({\n      whosTurn: !this.state.whosTurn\n    });\n  };\n\n  publishBidding = (e, player) => {\n    //Setter whos bidding til neste som skal spise\n    this.whosBidding =\n      player + 1 === this.props.players.length ? 0 : player + 1;\n    if (this.whosBidding === this.props.players.indexOf(this.props.userName)) {\n      if (this.state.passBidding) {\n        this.setState({\n          whosTurn: !this.state.whosTurn\n        });\n        this.announceBidding(null, this.whosBidding, e);\n        this.setState({\n          whosTurn: !this.state.whosTurn\n        });\n      } else {\n        this.setState({\n          whosTurn: true\n        });\n        this.makeBid(e, this.whosBidding);\n      }\n    } else {\n      console.log(\"Noen andre skal spise akkuratt nå\");\n    }\n  };\n\n  onMakeMove = sushi => {\n    console.log(\"We are about to make a move\");\n\n    // Check if the square is empty and if it's the player's turn to make a move\n\n    //squares[index] = this.props.piece;\n\n    this.setState({\n      whosTurn: !this.state.whosTurn\n    });\n    console.log(\"now this player is making a move\" + this.turn);\n    console.log(\"the total capacity is\" + this.props.occupancy);\n\n    // Other player's turn to make a move\n    this.turn = this.turn + 1 === this.props.players.length ? 0 : this.turn + 1;\n    console.log(\n      \" next move will be made by player \" + this.props.players[this.turn]\n    );\n\n    // Publish move to the channel\n    this.props.pubnub.publish({\n      message: {\n        piece: this.props.piece,\n        turn: this.turn\n      },\n      channel: this.props.gameChannel\n    });\n    console.log(\"We made a move\");\n\n    //Check if there is a winner\n    //this.checkForWinner(squares);\n  };\n  makeBid = (e, player) => {\n    if (this.state.lastBidding) {\n      return;\n    }\n    const a = parseInt(e) + 1;\n    console.log(\"The last amount you bid was\" + this.bid);\n    Swal.fire({\n      title: \"How many pieces do you think you can eat?\",\n      input: \"number\",\n      showCancelButton: true,\n      cancelButtonText: \"Pass\",\n      cancelButtonColor: \"Orange\",\n      inputAttributes: {\n        min: a\n      },\n      confirmButtonText: \"Bid\",\n      allowOutsideClick: false\n    }).then(result => {\n      if (result.value) {\n        console.log(\"DU mener du kan spise \" + result.value);\n        this.bid = result.value;\n        this.setState({\n          whosTurn: !this.state.whosTurn\n        });\n        this.announceBidding(result.value, player);\n      } else {\n        this.setState({\n          passBidding: true,\n          bidding: false\n        });\n        console.log(\"Du har passet\");\n        this.setState({\n          whosTurn: !this.state.whosTurn\n        });\n        this.announceBidding(null, player, e);\n      }\n    });\n  };\n\n  showChoices = e => {\n    (async () => {\n      /* inputOptions can be an object or Promise */\n      const inputOptions = new Promise(resolve => {\n        setTimeout(() => {\n          resolve({\n            true: \"Normal sushi\",\n            false: \"Fugu sushi\",\n            eat: \"Start bidding!\"\n          });\n        }, 1000);\n      });\n\n      const { value: sushi } = await Swal.fire({\n        title: \"What sushi would you like to place?\",\n        input: \"radio\",\n        inputOptions: inputOptions,\n        allowOutsideClick: false,\n        allowEscapeKey: false,\n        confirmButtonText: \"Place sushi\",\n        inputValidator: value => {\n          if (!value) {\n            return \"You need to choose something!\";\n          } else {\n            if (value === \"true\" && !this.sushis.includes(true)) {\n              return \"You do not have enough of this type of sushi!\";\n            }\n\n            if (value === \"false\" && !this.sushis.includes(false)) {\n              return \"You do not have enough of this type of sushi!\";\n            }\n          }\n        }\n      });\n\n      if (sushi) {\n        if (sushi === \"eat\") {\n          this.whosBidding = this.turn;\n          this.announceBidding(0);\n          this.setState({\n            bidding: true\n          });\n          this.makeBid(0, this.whosBidding);\n        } else {\n          if (sushi === \"true\") {\n            this.state.placed.push(true);\n            this.sushis.shift();\n            console.log(\"this is what you have placed \" + this.state.placed);\n            console.log(\"And this is what you have left \" + this.sushis);\n          }\n          if (sushi === \"false\") {\n            this.state.placed.push(false);\n            this.sushis.pop();\n            console.log(\"this is what you have placed\" + this.state.placed);\n            console.log(\"And this is what you have left \" + this.props.players);\n          }\n          this.onMakeMove(sushi);\n          console.log(this.state.placed);\n          console.log(this.sushis);\n        }\n      }\n    })();\n  };\n  //If their screen is clicked they send a sushi to the last bidder.\n  sendSushi = e => {\n    this.props.pubnub.publish({\n      message: {\n        clicked: true,\n        sushi: this.state.placed.pop()\n      },\n      channel: this.props.gameChannel\n    });\n    console.log(\"Sushi har blitt sendt\");\n  };\n  //Eats all their own sushi at once. Fails bid if not enough sushis.\n  eatOwnSushi = placed => {\n    while (this.state.placed.length > 0) {\n      const s = this.state.placed.pop();\n      if (!s) {\n        this.LoosePiece();\n        this.annouceFail();\n        break;\n      } else {\n        this.bid -= 1;\n        if (this.bid === 0) {\n          this.annouceWinner(); // Needs to be implemented\n          break;\n        }\n      }\n    }\n    console.log(\"Vi er ferdig meg while løkken\");\n    console.log(this.bid);\n  };\n\n  eatSushi = sushi => {\n    console.log(\"Nå skal vi spise en sushi\");\n    if (!sushi) {\n      this.LoosePiece();\n      this.annouceFail(); //This person has failed the attempt and looses a piece.\n    } else if (sushi) {\n      this.bid -= 1;\n      console.log(\"Vi har trukket fra en sushi\");\n      console.log(this.bid);\n      if (this.bid === 0) {\n        console.log(\"Vi er inne i vinner iffen\");\n        this.annouceWinner();\n      }\n    }\n  };\n\n  LoosePiece = e => {\n    if (this.pieces.includes(false)) {\n      const n = Math.floor(Math.random() * this.pieces.length);\n      if (n === 1) {\n        this.pieces.pop();\n        console.log(\"Du mistet en fugu sushi\");\n      } else {\n        this.pieces.shift();\n        console.log(\"Du mistet en vanlig sushi\");\n      }\n    } else {\n      this.pieces.pop();\n      console.log(\n        \"Du mistet en valig sushi siden du ikke har noen fuguer igjen\"\n      );\n    }\n  };\n\n  render() {\n    let status;\n    // Change to current player's turn\n    status = `${this.state.whosTurn ? \"Your turn\" : \"Opponent's turn\"}`;\n\n    return (\n      <div className=\"game\">\n        {!this.state.eatingStage && (\n          <div className=\"board\">\n            <Board\n              squares={this.state.squares}\n              //onClick={index => this.onMakeMove(index)}\n              placed={this.state.placed}\n            />\n            <div id=\"functions\">\n              <p className=\"status-info\">{status}</p>\n              <button\n                className=\"move-button\"\n                disabled={!this.state.whosTurn}\n                onClick={e => this.showChoices()}\n                hidden={\n                  this.state.bidding ||\n                  this.state.passBidding ||\n                  this.state.eatingStage\n                }\n              >\n                {\" \"}\n                Make move\n              </button>\n            </div>\n          </div>\n        )}\n        {this.state.eatingStage && (\n          <EatingBoard\n            squares={this.state.squares}\n            onClick={e => this.sendSushi()}\n            placed={this.state.placed}\n            lastBidding={this.state.lastBidding}\n            eatOwn={e => this.eatOwnSushi()}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Game;\n"]},"metadata":{},"sourceType":"module"}