{"ast":null,"code":"var _jsxFileName = \"/Users/Johan/fugu/src/App.js\";\nimport React, { Component } from \"react\";\nimport Game from \"./Game\"; //import Board from \"./Board\";\n\nimport PubNubReact from \"pubnub-react\";\nimport Swal from \"sweetalert2\";\nimport shortid from \"shortid\";\nimport \"./Game.css\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onPressCreate = e => {\n      // Create a random name for the channel\n      this.roomId = shortid.generate().substring(0, 5);\n      this.lobbyChannel = \"fugulobby--\" + this.roomId;\n      this.pubnub.subscribe({\n        channels: [this.lobbyChannel],\n        withPresence: true\n      }); // Open the modal\n\n      Swal.fire({\n        position: \"top\",\n        allowOutsideClick: false,\n        title: \"Share this room ID with your friend\",\n        text: this.roomId,\n        width: 275,\n        padding: \"0.7em\",\n        // Custom CSS\n        customClass: {\n          heightAuto: false,\n          title: \"title-class\",\n          popup: \"popup-class\",\n          confirmButton: \"button-class\"\n        }\n      });\n      this.setState({\n        piece: 1,\n        sushis: [true, true, true, false],\n        isRoomCreator: true,\n        isDisabled: true,\n        // Disable the 'Create' button\n        myTurn: true // Room creator makes the 1st move\n\n      });\n    };\n\n    this.onPressJoin = e => {\n      Swal.fire({\n        position: \"top\",\n        input: \"text\",\n        allowOutsideClick: false,\n        inputPlaceholder: \"Enter the room id\",\n        showCancelButton: true,\n        confirmButtonColor: \"rgb(208,33,41)\",\n        confirmButtonText: \"OK\",\n        width: 275,\n        padding: \"0.7em\",\n        customClass: {\n          heightAuto: false,\n          popup: \"popup-class\",\n          confirmButton: \"join-button-class \",\n          cancelButton: \"join-button-class\"\n        }\n      }).then(result => {\n        // Check if the user typed a value in the input field\n        if (result.value) {\n          this.joinRoom(result.value);\n        }\n      });\n    };\n\n    this.getNumberInChannel = e => {\n      this.pubnub.hereNow({\n        channel: [this.gameChannel, this.lobbyChannel]\n      }).then(response => {\n        console.log(response.totalOccupancy);\n        return response.totalOccupancy;\n      });\n    };\n\n    this.joinRoom = value => {\n      this.roomId = value;\n      this.lobbyChannel = \"fugulobby--\" + this.roomId; // Check the number of people in the channel\n\n      this.pubnub.hereNow({\n        channels: [this.lobbyChannel]\n      }).then(response => {\n        if (response.totalOccupancy < 200) {\n          this.pubnub.subscribe({\n            channels: [this.lobbyChannel],\n            withPresence: true\n          });\n          this.setState({\n            piece: response.totalOccupancy + 1,\n            sushis: [true, true, true, false]\n          });\n          console.log(\"Joined game as player \" + this.state.piece);\n          this.pubnub.publish({\n            message: {\n              notRoomCreator: true\n            },\n            channel: this.lobbyChannel\n          });\n        } else {\n          // Game in progress\n          Swal.fire({\n            position: \"top\",\n            allowOutsideClick: false,\n            title: \"Error\",\n            text: \"Game in progress. Try another room.\",\n            width: 275,\n            padding: \"0.7em\",\n            customClass: {\n              heightAuto: false,\n              title: \"title-class\",\n              popup: \"popup-class\",\n              confirmButton: \"button-class\"\n            }\n          });\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.startGame = () => {\n      // Create a different channel for the game\n      this.gameChannel = \"fuguegame--\" + this.roomId;\n      this.pubnub.subscribe({\n        channels: [this.gameChannel]\n      });\n      this.setState({\n        isPlaying: true\n      }); // Close the modals if they are opened\n\n      Swal.close();\n      console.log(this.state.sushis);\n\n      (async () => {\n        /* inputOptions can be an object or Promise */\n        const inputOptions = new Promise(resolve => {\n          setTimeout(() => {\n            resolve({\n              true: \"Normal sushi\",\n              false: \"Fugu sushi\"\n            });\n          }, 1000);\n        });\n\n        const _ref = await Swal.fire({\n          title: \"Choose your first move\",\n          input: \"radio\",\n          inputOptions: inputOptions,\n          allowOutsideClick: false,\n          allowEscapeKey: false,\n          confirmButtonText: \"Place sushi\",\n          inputValidator: value => {\n            if (!value) {\n              return \"You need to choose something!\";\n            } else {\n              if (value === \"true\" && !this.state.sushis.includes(true)) {\n                return \"You do not have enough of this type of sushi!\";\n              }\n\n              if (value === \"false\" && !this.state.sushis.includes(false)) {\n                return \"You do not have enough of this type of sushi!\";\n              }\n            }\n          }\n        }),\n              sushi = _ref.value;\n\n        if (sushi) {\n          if (sushi === \"true\") {\n            this.state.placed.push(true);\n            this.state.sushis.shift();\n          }\n\n          if (sushi === \"false\") {\n            this.state.placed.push(false);\n            this.state.sushis.pop();\n          }\n\n          Swal.fire({\n            html: \"you selected \".concat(sushi)\n          });\n          console.log(this.state.placed);\n          console.log(this.state.sushis);\n        }\n      })();\n    };\n\n    this.endGame = () => {\n      this.setState({\n        piece: \"\",\n        isPlaying: false,\n        isRoomCreator: false,\n        isDisabled: false,\n        myTurn: false\n      });\n      this.lobbyChannel = null;\n      this.gameChannel = null;\n      this.roomId = null;\n      this.pubnub.unsubscribe({\n        channels: [this.lobbyChannel, this.gameChannel]\n      });\n    };\n\n    this.pubnub = new PubNubReact({\n      publishKey: \"pub-c-fae6dfb9-0fd1-4b5e-a0f3-a3d4511085e9\",\n      subscribeKey: \"sub-c-0b5e637c-3675-11eb-b6eb-96faa39b9528\"\n    });\n    this.state = {\n      piece: \"\",\n      sushis: [],\n      placed: [],\n      isPlaying: false,\n      isRoomCreator: false,\n      isDisabled: false,\n      myTurn: false\n    };\n    this.lobbyChannel = null;\n    this.gameChannel = null;\n    this.roomId = null;\n    this.pubnub.init(this);\n  }\n\n  componentWillUnmount() {\n    this.pubnub.unsubscribe({\n      channels: [this.lobbyChannel, this.gameChannel]\n    });\n  }\n\n  componentDidUpdate() {\n    // Check that the player is connected to a channel\n    if (this.lobbyChannel != null) {\n      this.pubnub.getMessage(this.lobbyChannel, msg => {\n        // Start the game once an opponent joins the channel\n        if (msg.message.notRoomCreator) {\n          // Create a different channel for the game\n          this.gameChannel = \"fuguegame--\" + this.roomId;\n          this.pubnub.subscribe({\n            channels: [this.gameChannel]\n          }); // Close the modals if they are opened\n\n          Swal.close();\n          console.log(this.state.sushis);\n        }\n      });\n    }\n  } // Create a room channel\n\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"backGround-Brown\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, \"\\xA1FUGU!\")), React.createElement(\"div\", {\n      className: \"gamePin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, \"Gamepin: \", this.roomId, \" \")), !this.state.isPlaying && React.createElement(\"div\", {\n      className: \"game\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: \"https://i.imgur.com/y1DXfJk.png\",\n      alt: \"Welcome to FUGU\",\n      widt: \"30px\",\n      heigh: \"30px\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"button-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"create-button \",\n      disabled: this.state.isDisabled,\n      onClick: e => this.onPressCreate(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }, \" \", \"Create\"), React.createElement(\"button\", {\n      className: \"join-button\",\n      onClick: e => this.onPressJoin(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, \" \", \"Join\"), React.createElement(\"button\", {\n      className: \"start-button\",\n      hidden: !this.state.isRoomCreator,\n      onClick: console.log(\"haha\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }, \" \", \"Start\"))), this.state.isPlaying && React.createElement(Game, {\n      pubnub: this.pubnub,\n      gameChannel: this.gameChannel,\n      piece: this.state.piece,\n      isRoomCreator: this.state.isRoomCreator,\n      myTurn: this.state.myTurn,\n      xUsername: this.state.xUsername,\n      oUsername: this.state.oUsername,\n      endGame: this.endGame,\n      placed: this.state.placed,\n      sushis: this.state.sushis,\n      occupancy: this.getNumberInChannel(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"join-button\",\n      onClick: e => console.log(this.getNumberInChannel()),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }, \" \", \"Number\"));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/Johan/fugu/src/App.js"],"names":["React","Component","Game","PubNubReact","Swal","shortid","App","constructor","props","onPressCreate","e","roomId","generate","substring","lobbyChannel","pubnub","subscribe","channels","withPresence","fire","position","allowOutsideClick","title","text","width","padding","customClass","heightAuto","popup","confirmButton","setState","piece","sushis","isRoomCreator","isDisabled","myTurn","onPressJoin","input","inputPlaceholder","showCancelButton","confirmButtonColor","confirmButtonText","cancelButton","then","result","value","joinRoom","getNumberInChannel","hereNow","channel","gameChannel","response","console","log","totalOccupancy","state","publish","message","notRoomCreator","catch","error","startGame","isPlaying","close","inputOptions","Promise","resolve","setTimeout","true","false","allowEscapeKey","inputValidator","includes","sushi","placed","push","shift","pop","html","endGame","unsubscribe","publishKey","subscribeKey","init","componentWillUnmount","componentDidUpdate","getMessage","msg","render","xUsername","oUsername"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Game from \"./Game\";\n//import Board from \"./Board\";\nimport PubNubReact from \"pubnub-react\";\nimport Swal from \"sweetalert2\";\nimport shortid from \"shortid\";\nimport \"./Game.css\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.pubnub = new PubNubReact({\n      publishKey: \"pub-c-fae6dfb9-0fd1-4b5e-a0f3-a3d4511085e9\",\n      subscribeKey: \"sub-c-0b5e637c-3675-11eb-b6eb-96faa39b9528\"\n    });\n\n    this.state = {\n      piece: \"\",\n      sushis: [],\n      placed: [],\n      isPlaying: false,\n      isRoomCreator: false,\n      isDisabled: false,\n      myTurn: false\n    };\n\n    this.lobbyChannel = null;\n    this.gameChannel = null;\n    this.roomId = null;\n    this.pubnub.init(this);\n  }\n\n  componentWillUnmount() {\n    this.pubnub.unsubscribe({\n      channels: [this.lobbyChannel, this.gameChannel]\n    });\n  }\n\n  componentDidUpdate() {\n    // Check that the player is connected to a channel\n    if (this.lobbyChannel != null) {\n      this.pubnub.getMessage(this.lobbyChannel, msg => {\n        // Start the game once an opponent joins the channel\n        if (msg.message.notRoomCreator) {\n          // Create a different channel for the game\n          this.gameChannel = \"fuguegame--\" + this.roomId;\n\n          this.pubnub.subscribe({\n            channels: [this.gameChannel]\n          });\n\n          // Close the modals if they are opened\n          Swal.close();\n          console.log(this.state.sushis);\n        }\n      });\n    }\n  }\n\n  // Create a room channel\n  onPressCreate = e => {\n    // Create a random name for the channel\n    this.roomId = shortid.generate().substring(0, 5);\n    this.lobbyChannel = \"fugulobby--\" + this.roomId;\n\n    this.pubnub.subscribe({\n      channels: [this.lobbyChannel],\n      withPresence: true\n    });\n\n    // Open the modal\n    Swal.fire({\n      position: \"top\",\n      allowOutsideClick: false,\n      title: \"Share this room ID with your friend\",\n      text: this.roomId,\n      width: 275,\n      padding: \"0.7em\",\n      // Custom CSS\n      customClass: {\n        heightAuto: false,\n        title: \"title-class\",\n        popup: \"popup-class\",\n        confirmButton: \"button-class\"\n      }\n    });\n\n    this.setState({\n      piece: 1,\n      sushis: [true, true, true, false],\n      isRoomCreator: true,\n      isDisabled: true, // Disable the 'Create' button\n      myTurn: true // Room creator makes the 1st move\n    });\n  };\n\n  // The 'Join' button was pressed\n  onPressJoin = e => {\n    Swal.fire({\n      position: \"top\",\n      input: \"text\",\n      allowOutsideClick: false,\n      inputPlaceholder: \"Enter the room id\",\n      showCancelButton: true,\n      confirmButtonColor: \"rgb(208,33,41)\",\n      confirmButtonText: \"OK\",\n      width: 275,\n      padding: \"0.7em\",\n      customClass: {\n        heightAuto: false,\n        popup: \"popup-class\",\n        confirmButton: \"join-button-class \",\n        cancelButton: \"join-button-class\"\n      }\n    }).then(result => {\n      // Check if the user typed a value in the input field\n      if (result.value) {\n        this.joinRoom(result.value);\n      }\n    });\n  };\n  getNumberInChannel = e => {\n    this.pubnub\n      .hereNow({\n        channel: [this.gameChannel, this.lobbyChannel]\n      })\n      .then(response => {\n        console.log(response.totalOccupancy);\n        return response.totalOccupancy;\n      });\n  };\n\n  // Join a room channel\n  joinRoom = value => {\n    this.roomId = value;\n    this.lobbyChannel = \"fugulobby--\" + this.roomId;\n\n    // Check the number of people in the channel\n    this.pubnub\n      .hereNow({\n        channels: [this.lobbyChannel]\n      })\n      .then(response => {\n        if (response.totalOccupancy < 200) {\n          this.pubnub.subscribe({\n            channels: [this.lobbyChannel],\n            withPresence: true\n          });\n\n          this.setState({\n            piece: response.totalOccupancy + 1,\n            sushis: [true, true, true, false]\n          });\n\n          console.log(\"Joined game as player \" + this.state.piece);\n\n          this.pubnub.publish({\n            message: {\n              notRoomCreator: true\n            },\n            channel: this.lobbyChannel\n          });\n        } else {\n          // Game in progress\n          Swal.fire({\n            position: \"top\",\n            allowOutsideClick: false,\n            title: \"Error\",\n            text: \"Game in progress. Try another room.\",\n            width: 275,\n            padding: \"0.7em\",\n            customClass: {\n              heightAuto: false,\n              title: \"title-class\",\n              popup: \"popup-class\",\n              confirmButton: \"button-class\"\n            }\n          });\n        }\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  };\n  startGame = () => {\n    // Create a different channel for the game\n    this.gameChannel = \"fuguegame--\" + this.roomId;\n\n    this.pubnub.subscribe({\n      channels: [this.gameChannel]\n    });\n\n    this.setState({\n      isPlaying: true\n    });\n\n    // Close the modals if they are opened\n    Swal.close();\n    console.log(this.state.sushis);\n    (async () => {\n      /* inputOptions can be an object or Promise */\n      const inputOptions = new Promise(resolve => {\n        setTimeout(() => {\n          resolve({\n            true: \"Normal sushi\",\n            false: \"Fugu sushi\"\n          });\n        }, 1000);\n      });\n\n      const { value: sushi } = await Swal.fire({\n        title: \"Choose your first move\",\n        input: \"radio\",\n        inputOptions: inputOptions,\n        allowOutsideClick: false,\n        allowEscapeKey: false,\n        confirmButtonText: \"Place sushi\",\n        inputValidator: value => {\n          if (!value) {\n            return \"You need to choose something!\";\n          } else {\n            if (value === \"true\" && !this.state.sushis.includes(true)) {\n              return \"You do not have enough of this type of sushi!\";\n            }\n            if (value === \"false\" && !this.state.sushis.includes(false)) {\n              return \"You do not have enough of this type of sushi!\";\n            }\n          }\n        }\n      });\n\n      if (sushi) {\n        if (sushi === \"true\") {\n          this.state.placed.push(true);\n          this.state.sushis.shift();\n        }\n        if (sushi === \"false\") {\n          this.state.placed.push(false);\n          this.state.sushis.pop();\n        }\n        Swal.fire({ html: `you selected ${sushi}` });\n        console.log(this.state.placed);\n        console.log(this.state.sushis);\n      }\n    })();\n  };\n\n  // Reset everything\n  endGame = () => {\n    this.setState({\n      piece: \"\",\n      isPlaying: false,\n      isRoomCreator: false,\n      isDisabled: false,\n      myTurn: false\n    });\n\n    this.lobbyChannel = null;\n    this.gameChannel = null;\n    this.roomId = null;\n\n    this.pubnub.unsubscribe({\n      channels: [this.lobbyChannel, this.gameChannel]\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"backGround-Brown\">\n        <div className=\"title\">\n          <p>Â¡FUGU!</p>\n        </div>\n        <div className=\"gamePin\">\n          <p>Gamepin: {this.roomId} </p>\n        </div>\n\n        {!this.state.isPlaying && (\n          <div className=\"game\">\n            <img\n              src=\"https://i.imgur.com/y1DXfJk.png\"\n              alt=\"Welcome to FUGU\"\n              widt=\"30px\"\n              heigh=\"30px\"\n            />\n            <div className=\"button-container\">\n              <button\n                className=\"create-button \"\n                disabled={this.state.isDisabled}\n                onClick={e => this.onPressCreate()}\n              >\n                {\" \"}\n                Create\n              </button>\n              <button className=\"join-button\" onClick={e => this.onPressJoin()}>\n                {\" \"}\n                Join\n              </button>\n              <button\n                className=\"start-button\"\n                hidden={!this.state.isRoomCreator}\n                onClick={console.log(\"haha\")}\n              >\n                {\" \"}\n                Start\n              </button>\n            </div>\n          </div>\n        )}\n\n        {this.state.isPlaying && (\n          <Game\n            pubnub={this.pubnub}\n            gameChannel={this.gameChannel}\n            piece={this.state.piece}\n            isRoomCreator={this.state.isRoomCreator}\n            myTurn={this.state.myTurn}\n            xUsername={this.state.xUsername}\n            oUsername={this.state.oUsername}\n            endGame={this.endGame}\n            placed={this.state.placed}\n            sushis={this.state.sushis}\n            occupancy={this.getNumberInChannel()}\n          />\n        )}\n        <button\n          className=\"join-button\"\n          onClick={e => console.log(this.getNumberInChannel())}\n        >\n          {\" \"}\n          Number\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}