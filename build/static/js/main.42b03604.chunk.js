(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{256:function(e,t,n){},257:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),i=n(91),o=n.n(i),l=n(7),u=n(8),r=n(10),c=n(9),d=n(30),p=n(11),h=n(48),g=n.n(h),m=n(92),b=n(49),f=function(e){function t(e){return Object(l.a)(this,t),Object(r.a)(this,Object(c.a)(t).call(this,e))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{id:"backgroundBoard"},a.a.createElement("img",{id:"emptyBoard",src:"https://i.imgur.com/LNH3flq.png",alt:"board0",hidden:!(0===this.props.placed.length)}),a.a.createElement("img",{id:"fuguBoard",src:"https://i.imgur.com/xBtGEro.png",alt:"board1",hidden:!(1===this.props.placed.length)}),a.a.createElement("img",{id:"fuguBoard",src:"https://i.imgur.com/v6qEAq9.png",alt:"board2",hidden:!(2===this.props.placed.length)}),a.a.createElement("img",{id:"fuguBoard",src:"https://i.imgur.com/Msw4WCu.png",alt:"board3",hidden:!(3===this.props.placed.length)}),a.a.createElement("img",{id:"fuguBoard",src:"https://i.imgur.com/656n59P.png",alt:"board4",hidden:!(4===this.props.placed.length)}))}}]),t}(a.a.Component),y=function(e){function t(e){return Object(l.a)(this,t),Object(r.a)(this,Object(c.a)(t).call(this,e))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{id:"backgroundBoard"},!this.props.lastBidding&&a.a.createElement("button",{className:"boardButton",onClick:this.props.onClick},a.a.createElement("img",{id:"emptyBoard",src:"https://i.imgur.com/LNH3flq.png",alt:"board0",hidden:!(0===this.props.placed.length)}),a.a.createElement("img",{id:"fuguBoard",src:"https://i.imgur.com/xBtGEro.png",alt:"board1",hidden:!(1===this.props.placed.length)}),a.a.createElement("img",{id:"fuguBoard",src:"https://i.imgur.com/v6qEAq9.png",alt:"board2",hidden:!(2===this.props.placed.length)}),a.a.createElement("img",{id:"fuguBoard",src:"https://i.imgur.com/Msw4WCu.png",alt:"board3",hidden:!(3===this.props.placed.length)}),a.a.createElement("img",{id:"fuguBoard",src:"https://i.imgur.com/656n59P.png",alt:"board4",hidden:!(4===this.props.placed.length)})),this.props.lastBidding&&a.a.createElement("img",{src:"https://i.imgur.com/y1DXfJk.png",alt:"Welcome to FUGU",widt:"30px",heigh:"30px"}),a.a.createElement("button",{onClick:this.props.eatOwn,hidden:!this.props.lastBidding}," ","Eat Your sushis"))}}]),t}(a.a.Component),B=n(2),w=n.n(B),v=(n(101),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(r.a)(this,Object(c.a)(t).call(this,e))).newRound=function(e){if(console.log("NEW ROUND BLIR KJ\xd8RT"),n.state.lastBidding){n.setState({whosTurn:!0,bidding:!1,passBidding:!1,lastBidding:!1,eatingStage:!1,placed:[]});var t=Object(b.a)(n.pieces);n.sushis=t,n.bid=0,n.turn=n.props.players.indexOf(n.props.userName),n.whosBidding=null,n.passedPlayers=[]}else{console.log("nullstiller for ikke h\xf8yeste budgiver"),n.setState({whosTurn:!1,bidding:!1,passBidding:!1,lastBidding:!1,eatingStage:!1,placed:[]});var s=Object(b.a)(n.pieces);n.sushis=s,n.turn=n.props.players.indexOf(e),n.bid=0,n.whosBidding=null,n.passedPlayers=[]}},n.announceEating=function(e,t){n.props.pubnub.publish({message:{eatingStage:!0,whoEating:e,amount:t,bidding:!1},channel:n.props.gameChannel})},n.announceBidding=function(e,t,s){n.props.pubnub.publish({message:{bidding:!0,amountBidden:e,ateBy:t,lastAmount:s},channel:n.props.gameChannel})},n.annouceWinner=function(e){console.log("Announce winner"),n.props.pubnub.publish({message:{success:!0,userName:n.props.userName,reset:!0},channel:n.props.gameChannel})},n.annouceFail=function(e){n.props.pubnub.publish({message:{failed:!0,userName:n.props.userName,reset:!0},channel:n.props.gameChannel})},n.myMove=function(e){n.setState({whosTurn:!n.state.whosTurn})},n.publishBidding=function(e,t){n.whosBidding=t+1===n.props.players.length?0:t+1,n.whosBidding===n.props.players.indexOf(n.props.userName)?n.state.passBidding?(n.setState({whosTurn:!n.state.whosTurn}),n.announceBidding(null,n.whosBidding,e),n.setState({whosTurn:!n.state.whosTurn})):(n.setState({whosTurn:!0}),n.makeBid(e,n.whosBidding)):console.log("Noen andre skal spise akkuratt n\xe5")},n.onMakeMove=function(e){console.log("We are about to make a move"),n.setState({whosTurn:!n.state.whosTurn}),console.log("now this player is making a move"+n.turn),console.log("the total capacity is"+n.props.occupancy),n.turn=n.turn+1===n.props.players.length?0:n.turn+1,console.log(" next move will be made by player "+n.props.players[n.turn]),n.props.pubnub.publish({message:{piece:n.props.piece,turn:n.turn},channel:n.props.gameChannel}),console.log("We made a move")},n.makeBid=function(e,t){if(!n.state.lastBidding){var s=parseInt(e)+1;console.log("The last amount you bid was"+n.bid),w.a.fire({title:"How many pieces do you think you can eat?",input:"number",showCancelButton:!0,cancelButtonText:"Pass",cancelButtonColor:"Orange",inputAttributes:{min:s},confirmButtonText:"Bid",allowOutsideClick:!1}).then(function(s){s.value?(console.log("DU mener du kan spise "+s.value),n.bid=s.value,n.setState({whosTurn:!n.state.whosTurn}),n.announceBidding(s.value,t)):(n.setState({passBidding:!0,bidding:!1}),console.log("Du har passet"),n.setState({whosTurn:!n.state.whosTurn}),n.announceBidding(null,t,e))})}},n.showChoices=function(e){Object(m.a)(g.a.mark(function e(){var t,s,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Promise(function(e){setTimeout(function(){e({true:"Normal sushi",false:"Fugu sushi",eat:"Start bidding!"})},1e3)}),e.next=3,w.a.fire({title:"What sushi would you like to place?",input:"radio",inputOptions:t,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Place sushi",inputValidator:function(e){return e?("true"!==e||n.sushis.includes(!0))&&("false"!==e||n.sushis.includes(!1))?void 0:"You do not have enough of this type of sushi!":"You need to choose something!"}});case 3:s=e.sent,(a=s.value)&&("eat"===a?(n.whosBidding=n.turn,n.announceBidding(0),n.setState({bidding:!0}),n.makeBid(0,n.whosBidding)):("true"===a&&(n.state.placed.push(!0),n.sushis.shift(),console.log("this is what you have placed "+n.state.placed),console.log("And this is what you have left "+n.sushis)),"false"===a&&(n.state.placed.push(!1),n.sushis.pop(),console.log("this is what you have placed"+n.state.placed),console.log("And this is what you have left "+n.props.players)),n.onMakeMove(a),console.log(n.state.placed),console.log(n.sushis)));case 6:case"end":return e.stop()}},e)}))()},n.sendSushi=function(e){n.props.pubnub.publish({message:{clicked:!0,sushi:n.state.placed.pop()},channel:n.props.gameChannel}),console.log("Sushi har blitt sendt")},n.eatOwnSushi=function(e){for(;n.state.placed.length>0;){if(!n.state.placed.pop()){n.LoosePiece(),n.annouceFail();break}if(n.bid-=1,0===n.bid){n.annouceWinner();break}}console.log("Vi er ferdig meg while l\xf8kken"),console.log(n.bid)},n.eatSushi=function(e){console.log("N\xe5 skal vi spise en sushi"),e?e&&(n.bid-=1,console.log("Vi har trukket fra en sushi"),console.log(n.bid),0===n.bid&&(console.log("Vi er inne i vinner iffen"),n.annouceWinner())):(n.LoosePiece(),n.annouceFail())},n.LoosePiece=function(e){n.pieces.includes(!1)?1===Math.floor(Math.random()*n.pieces.length)?(n.pieces.pop(),console.log("Du mistet en fugu sushi")):(n.pieces.shift(),console.log("Du mistet en vanlig sushi")):(n.pieces.pop(),console.log("Du mistet en valig sushi siden du ikke har noen fuguer igjen"))},n.state={whosTurn:n.props.myTurn,bidding:!1,passBidding:!1,lastBidding:!1,eatingStage:!1,nextRound:!1,placed:n.props.placed},n.pieces=[!0,!0,!0,!1],n.sushis=[!0,!0,!0,!1],n.turn=0,n.whosBidding=null,n.gameOver=!1,n.counter=0,n.bid=0,n.passedPlayers=[],n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.pubnub.getMessage(this.props.gameChannel,function(t){e.turn=t.message.turn,e.props.players[t.message.turn]===e.props.userName?e.myMove(t.message.index,t.message.piece):t.message.bidding?(t.message.amountBidden>0?(e.publishBidding(t.message.amountBidden,t.message.ateBy),console.log("Player "+t.message.ateBy+"bid "+t.message.amountBidden),e.publishBidding(t.message.amountBidden,t.message.ateBy)):null===t.message.amountBidden?(console.log(t.message.ateBy+" passed"),e.passedPlayers.includes(t.message.ateBy)||e.passedPlayers.push(t.message.ateBy),e.passedPlayers.length!==e.props.players.length-1||e.state.passBidding?e.publishBidding(t.message.lastAmount,t.message.ateBy):(console.log("du er den siste som er igjen"),e.setState({lastBidding:!0}),e.announceEating(e.userName,e.bid),w.a.close())):(console.log("Vi er inne i elsen og denne spilleren skal begynne \xe5 by "+e.whosBidding),e.setState({bidding:!0})),console.log("LETS START BIDDING!")):t.message.eatingStage?(w.a.close(),e.setState({eatingStage:!0,bidding:!1}),console.log("eating stage")):t.message.clicked&&e.state.lastBidding?e.eatSushi(t.message.sushi):t.message.failed?w.a.fire({type:"error",title:"Oops...",text:"The attempt failed. The atempting player will loose a random sushi."}).then(function(n){e.newRound(t.message.userName),console.log("N\xe5 ble den trykket")}):t.message.success?(w.a.fire({type:"success",title:"Wohooo!",confirmButtonText:"Next Round",text:"The attempt was a success. The atempting player will receive one point!."}).then(function(n){e.newRound(t.message.userName),console.log("N\xe5 ble den trykket")}),console.log("The bet was successfull")):t.message.endGame&&(w.a.close(),e.props.endGame())})}},{key:"render",value:function(){var e,t=this;return e="".concat(this.state.whosTurn?"Your turn":"Opponent's turn"),a.a.createElement("div",{className:"game"},!this.state.eatingStage&&a.a.createElement("div",{className:"board"},a.a.createElement(f,{squares:this.state.squares,placed:this.state.placed}),a.a.createElement("div",{id:"functions"},a.a.createElement("p",{className:"status-info"},e),a.a.createElement("button",{className:"move-button",disabled:!this.state.whosTurn,onClick:function(e){return t.showChoices()},hidden:this.state.bidding||this.state.passBidding||this.state.eatingStage}," ","Make move"))),this.state.eatingStage&&a.a.createElement(y,{squares:this.state.squares,onClick:function(e){return t.sendSushi()},placed:this.state.placed,lastBidding:this.state.lastBidding,eatOwn:function(e){return t.eatOwnSushi()}}))}}]),t}(a.a.Component)),C=n(93),k=n.n(C),E=n(94),N=n.n(E),O=(n(256),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(r.a)(this,Object(c.a)(t).call(this,e))).onPressCreate=function(e){n.roomId=N.a.generate().substring(0,5),n.lobbyChannel="fugulobby--"+n.roomId,n.pubnub.subscribe({channels:[n.lobbyChannel],withPresence:!0}),w.a.mixin({allowOutsideClick:!1,progressSteps:["1","2"],customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}}).queue([{title:"Share this room ID with your friend",text:n.roomId},{title:"Enter your username",input:"text"}]).then(function(e){var t=JSON.stringify(e.value[1]),s=t.substring(1,t.length-1);console.log(s),n.userName=s,n.players.push(s)}),n.setState({piece:1,sushis:[!0,!0,!0,!1],isRoomCreator:!0,isDisabled:!0,myTurn:!0})},n.onPressJoin=function(e){w.a.mixin({input:"text",confirmButtonText:"Next &rarr;",showCancelButton:!0,progressSteps:["1","2"]}).queue([{title:"Game Pin",text:"Enter the 5 characters that is unique for your game"},{title:"Username",text:"Enter the username you would like to be called "}]).then(function(e){if(e.value){var t=JSON.stringify(e.value);w.a.fire({title:"All done!",html:"\n            Your answers:\n            <pre><code>".concat(t,"</code></pre>\n          "),confirmButtonText:"Lovely!"}),n.userName=e.value[1],n.joinRoom(e.value[0],e.value[1])}})},n.getNumberInChannel=function(e){console.log(n.players)},n.joinRoom=function(e,t){n.roomId=e,n.lobbyChannel="fugulobby--"+n.roomId,n.pubnub.hereNow({channels:[n.lobbyChannel]}).then(function(e){e.totalOccupancy<200?(n.pubnub.subscribe({channels:[n.lobbyChannel],withPresence:!0}),n.setState({piece:e.totalOccupancy+1,sushis:[!0,!0,!0,!1]}),console.log("Joined game as player "+n.state.piece),n.pubnub.publish({message:{newPlayer:!0,userName:t},channel:n.lobbyChannel})):w.a.fire({position:"top",allowOutsideClick:!1,title:"Error",text:"Game in progress. Try another room.",width:275,padding:"0.7em",customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}})}).catch(function(e){console.log(e)})},n.startGame=function(e){n.pubnub.publish({message:{gameStarted:!0,players:n.players},channel:n.lobbyChannel})},n.endGame=function(){n.setState({piece:"",isPlaying:!1,isRoomCreator:!1,isDisabled:!1,myTurn:!1}),n.lobbyChannel=null,n.gameChannel=null,n.roomId=null,n.pubnub.unsubscribe({channels:[n.lobbyChannel,n.gameChannel]})},n.pubnub=new k.a({publishKey:"pub-c-fae6dfb9-0fd1-4b5e-a0f3-a3d4511085e9",subscribeKey:"sub-c-0b5e637c-3675-11eb-b6eb-96faa39b9528"}),n.state={piece:"",sushis:[],placed:[],isPlaying:!1,isRoomCreator:!1,isDisabled:!1,myTurn:!1},n.lobbyChannel=null,n.gameChannel=null,n.roomId=null,n.pubnub.init(Object(d.a)(n)),n.userName=null,n.players=[],n.pieces=[!0,!0,!0,!1],n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillUnmount",value:function(){this.pubnub.unsubscribe({channels:[this.lobbyChannel,this.gameChannel]})}},{key:"componentDidUpdate",value:function(){var e=this;null!=this.lobbyChannel&&this.pubnub.getMessage(this.lobbyChannel,function(t){t.message.newPlayer&&e.players.push(t.message.userName),t.message.gameStarted&&(e.gameChannel="fuguegame--"+e.roomId,e.players=t.message.players,e.pubnub.subscribe({channels:[e.gameChannel]}),e.setState({isPlaying:!0}),w.a.close(),console.log(e.state.sushis))})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"backGround-Brown"},a.a.createElement("div",{className:"title"},a.a.createElement("p",null,"\xa1FUGU!")),a.a.createElement("div",{className:"gamePin"}),!this.state.isPlaying&&a.a.createElement("div",{className:"game"},a.a.createElement("p",null,"Gamepin: ",this.roomId," "),a.a.createElement("p",null," Velkommen ",this.userName),a.a.createElement("img",{src:"https://i.imgur.com/y1DXfJk.png",alt:"Welcome to FUGU",widt:"30px",heigh:"30px"}),a.a.createElement("div",{className:"button-container"},a.a.createElement("button",{className:"create-button ",disabled:this.state.isDisabled,onClick:function(t){return e.onPressCreate()}}," ","Create"),a.a.createElement("button",{className:"join-button",onClick:function(t){return e.onPressJoin()}}," ","Join"),a.a.createElement("button",{className:"start-button",hidden:!this.state.isRoomCreator,onClick:function(t){return e.startGame()}}," ","Start"))),this.state.isPlaying&&a.a.createElement(v,{pubnub:this.pubnub,gameChannel:this.gameChannel,piece:this.state.piece,isRoomCreator:this.state.isRoomCreator,myTurn:this.state.myTurn,xUsername:this.state.xUsername,oUsername:this.state.oUsername,endGame:this.endGame,placed:this.state.placed,sushis:this.state.sushis,occupancy:this.players.length,players:this.players,userName:this.userName,pieces:this.pieces,isPlaying:this.isPlaying}))}}]),t}(s.Component));o.a.render(a.a.createElement(O,null),document.getElementById("root"))},95:function(e,t,n){e.exports=n(257)}},[[95,1,2]]]);
//# sourceMappingURL=main.42b03604.chunk.js.map